<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista Spesa</title>
</head>
<body>
    <h1>Lista spesa</h1>
    
    <!-- Pulsante per generare prodotti casuali -->
    <button onclick="generaProdotti()">Genera Prodotti Casuali</button>
    
    <!-- campo per inserire il prodotto -->
    <input type="text" id="item-input" placeholder="Inserisci prodotto">
    
    <!-- campo per inserire la quantità -->
    <input type="number" id="quantity-input" placeholder="Inserisci quantità">
    
    <button onclick="aggiungieElemento()">Aggiungi</button>
    
    <!-- Lista della spesa -->
    <ul id="shopping-list"></ul>

    <script>
        // Array di nomi di prodotti
        const nomiProdotti = ["Pane", "Latte", "Uova", "Mela", "Banana", "Carne", "Formaggio"];

        // Dichiarazione dell'array per la lista della spesa
        let listaSpesa = [];

        // Funzione per generare prodotti con ID e quantità casuale
        function generaProdotti() {
            let prodottiCasuali = []; // Array temporaneo per i prodotti casuali
            
            // Creiamo 5 prodotti casuali
            for (let i = 0; i < 5; i++) {
                let prodotto = {
                    id: listaSpesa.length + 1,  // ID progressivo 
                    nome: nomiProdotti[Math.floor(Math.random() * nomiProdotti.length)], // Nome casuale da nomiProdotti
                    quantita: Math.floor(Math.random() * 5) + 1  // Quantità casuale tra 1 e 5
                };
                prodottiCasuali.push(prodotto);  // Aggiungiamo il prodotto all'array temporaneo
            }
            
            // Aggiungi i prodotti casuali alla lista della spesa
            listaSpesa = listaSpesa.concat(prodottiCasuali);
            
            // Visualizziamo la lista aggiornata
            aggiornaLista();
        }

        // Funzione per aggiungere l'elemento con la quantità alla lista
        function aggiungieElemento() {
            let itemInput = document.getElementById('item-input');
            let quantityInput = document.getElementById('quantity-input');
            
            let valoreProdotto = itemInput.value.trim();
            let valoreQuantita = quantityInput.value.trim();

            // Controllo se il prodotto e la quantità sono validi
            if (valoreProdotto !== '' && valoreQuantita !== '' && !isNaN(valoreQuantita) && valoreQuantita > 0) {
                let prodotto = {
                    id: listaSpesa.length + 1,  // ID progressivo, in base alla lunghezza attuale della lista
                    nome: valoreProdotto,
                    quantita: valoreQuantita
                };
                listaSpesa.push(prodotto);

                // Reset dei campi di input
                itemInput.value = '';
                quantityInput.value = '';

                // Aggiorna la lista
                aggiornaLista();
            } else {
                alert('Inserisci un prodotto valido e una quantità.');
            }
        }

        // Funzione per aggiornare la lista della spesa nell'HTML
        function aggiornaLista() {
            let ul = document.getElementById('shopping-list');
            ul.innerHTML = '';  // Pulisce la lista esistente

            // Aggiunge ogni prodotto alla lista
            for (let i = 0; i < listaSpesa.length; i++) {
                let li = document.createElement('li');
                li.textContent = `ID: ${listaSpesa[i].id} -: ${listaSpesa[i].nome} - : ${listaSpesa[i].quantita}`;
                
                // Pulsante "Delete" per rimuovere l'elemento
                let deleteButton = document.createElement('button');
                deleteButton.style.marginLeft = '10px';
                deleteButton.textContent = 'Delete';
                deleteButton.onclick = function() {
                    // Rimuove l'elemento dalla lista in base all'ID
                    listaSpesa = listaSpesa.filter(prodotto => prodotto.id !== listaSpesa[i].id);
                    aggiornaLista();  // Rende effettiva la modifica alla lista
                };

                li.appendChild(deleteButton); //aggiunge il pulsante delete come figlio alla lista
                ul.appendChild(li); //aggiunge l'elemento li alla lista
            }
        }
    </script>
</body>
</html>
